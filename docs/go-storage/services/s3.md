[Amazon S3](https://aws.amazon.com/s3/)

## Config

### Servicer

| Name | Required | Comments |
| ---- | -------- | -------- |
| [credential](go-storage/pairs/credential.md) | Y | support `hmac` and `env` protocol |
| force_path_style | N | virtual hosting of buckets |
| disable_100_continue | N | to disable the SDK adding the `Expect: 100-Continue` header to PUT requests over 2MB of content |
| use_accelerate | N | s3 accelerate feature |
| use_arn_region | N | use the region specified in the ARN |

### Storager

| Name | Required | Comments |
| ---- | -------- | -------- |
| [name](go-storage/pairs/name.md) | Y | bucket name |
| [work_dir](go-storage/pairs/work_dir.md) | N | work dir |
| [location](go-storage/pairs/location.md) | Y | bucket location |

## Example

Init servicer

```yaml
credential: hmac:<account_name>:<account_key>
```

Init storager

```yaml
credential: hmac:<account_name>:<account_key>
name: <container_name>
work_dir: /<work_dir>
location: <bucket_location>
```

## Pairs

### Server-Side Encryption (SSE)

#### SSE-S3

Server-Side Encryption with Amazon S3-Management Keys

| Name                   | Comments                                     |
| ---------------------- | -------------------------------------------- |
| server-side-encryption | the encryption algorithm. should be `AES256` |

##### Supported Operations

The following REST upload APIs accept the `x-amz-server-side-encryption` request header:

- [Write](../operations/storager/write.md)
- [CreateMultipart](../operations/multiparter/create_multipart.md)

The response headers of the following REST APIs return `x-amz-server-side-encryption` header when an object is stored using server-side encryption.

- [Write](../operations/storager/write.md)
- [CreateMultipart](../operations/multiparter/create_multipart.md)
- [WriteMultipart](../operations/multiparter/write_multipart.md)
- [CompleteMultipart](../operations/multiparter/complete_multipart.md)
- [Read](../operations/storager/read.md)
- [Stat](../operations/storager/stat.md)

#### SSE-KMS

Server-Side Encryption with Customer Master Keys Stored in AWS Key Management Services

| Name                                      | Comments                                                     |
| ----------------------------------------- | ------------------------------------------------------------ |
| server-side-encryption                    | the server-side encryption algorithm used when storing this object in Amazon. Should be `aws:kms`. |
| server-side-encryption-aws-kms-key-id     | specify the ID of the customer managed CMK used to protect the data |
| server-side-encryption-context            | an optional set of key-value pairs that can contain additional contextual information about the data.The value of this header is a base64-encoded UTF-8 string holding JSON with the encryption context key-value pairs. |
| server-side-encryption-bucket-key-enabled | enable or disable an S3 Bucket Key at the object-level. S3 Bucket Keys can reduce your AWS KMS request costs by decreasing the request traffic from Amazon S3 to AWS KMS. |

##### Supported Operations

The following REST APIs accept the `x-amz-server-side-encryption`, `x-amz-server-side-encryption-aws-kms-key-id`, and `x-amz-server-side-encryption-context` request headers.

- [Write](../operations/storager/write.md)
- [CreateMultipart](../operations/multiparter/create_multipart.md)

The response headers of the REST APIs return the `x-amz-server-side-encryption` header when an object is stored using server-side encryption are the same with SSE-S3.

#### SSE-C

Server-Side Encryption with Customer-Provided Keys

| Name                                      | Comments                                                     |
| ----------------------------------------- | ------------------------------------------------------------ |
| server-side-encryption-customer-algorithm | Use this header to specify the encryption algorithm. The header value must be "AES256". |
| server-side-encryption-customer-key       | Use this header to provide the 256-bit, base64-encoded encryption key for Amazon S3 to use to encrypt or decrypt your data. |
| server-side-encryption-customer-key-md5   | a message integrity check to ensure that the encryption key was transmitted without error. Use this header to provide the base64-encoded 128-bit MD5 digest of the encryption key according to [RFC 1321](http://tools.ietf.org/html/rfc1321). |

##### Supported Operations

- [Read](../operations/storager/read.md)
- [Stat](../operations/storager/stat.md)
- [Write](../operations/storager/write.md)
- [CreateMultipart](../operations/multiparter/create_multipart.md)
- [WriteMultipart](../operations/multiparter/write_multipart.md)

